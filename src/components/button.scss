%btn-focus-state {
  box-shadow: var(--op-input-focus);
  outline: none;
}

%btn-global {
  // Public API (allowed to be overridden)
  --_op-btn-height-small: var(--op-input-height-small);
  --_op-btn-height-medium: var(--op-input-height-medium);
  --_op-btn-height-large: var(--op-input-height-large);
  --_op-btn-font-small: var(--op-font-x-small);
  --_op-btn-font-medium: var(--op-font-small);
  --_op-btn-font-large: var(--op-font-medium);

  // Private API (don't touch these)
  --__op-btn-height: var(--_op-btn-height-medium);
  --__op-btn-font-size: var(--_op-btn-font-medium);

  display: inline-flex;
  height: var(--__op-btn-height);
  align-items: center;
  justify-content: center;
  padding: 0 var(--op-space-medium);
  border-radius: var(--op-radius-large);
  appearance: none;
  cursor: pointer;
  font-size: var(--__op-btn-font-size);
  font-weight: var(--op-font-weight-medium);
  gap: var(--op-space-x-small);
  text-align: center;
  text-decoration: none;
  transition: var(--op-transition-input);
  white-space: nowrap;

  // Pill Modifier
  &.btn--pill {
    border-radius: var(--op-radius-pill);
  }

  // Icon Modifier
  &.btn--icon {
    width: var(--__op-btn-height);
    min-width: var(--__op-btn-height);
    padding: 0;
    border-radius: var(--op-radius-circle);
  }

  // Size Modifiers
  &.btn--small {
    --__op-btn-height: var(--_op-btn-height-small);
    --__op-btn-font-size: var(--_op-btn-font-small);
  }

  &.btn--medium {
    --__op-btn-height: var(--_op-btn-height-medium);
    --__op-btn-font-size: var(--_op-btn-font-medium);
  }

  &.btn--large {
    --__op-btn-height: var(--_op-btn-height-large);
    --__op-btn-font-size: var(--_op-btn-font-large);
  }

  // Disabled Modifier
  &.btn--disabled,
  &:disabled {
    cursor: not-allowed;
    opacity: 0.65;
  }

  // Button with notification style badge
  &.btn--with-badge {
    position: relative;
  }

  // Focus State
  &:focus,
  &:focus-within,
  &:focus-visible {
    @extend %btn-focus-state;
  }

  &.btn--no-border {
    &:focus,
    &:focus-within,
    &:focus-visible {
      @extend %btn-focus-state;
    }
  }

  &.btn--outline {
    &:focus,
    &:focus-within,
    &:focus-visible {
      @extend %btn-focus-state;
    }
  }

  // https://uxmovement.com/mobile/optimal-size-and-spacing-for-mobile-buttons/
  @media (max-width: $breakpoint-small) {
    --__op-btn-height: var(--_op-btn-height-large);
    --__op-btn-font-size: var(--_op-btn-font-large);

    &.btn--small,
    &.btn--medium,
    &.btn--large {
      --__op-btn-height: var(--_op-btn-height-large);
      --__op-btn-font-size: var(--_op-btn-font-large);
    }
  }
}

.btn {
  @extend %btn-global;

  background-color: transparent;
  box-shadow: var(--op-border-all) var(--op-border-color);
  color: var(--op-color-neutral-minus-max);

  &:not(:disabled, .btn--disabled):hover {
    background-color: var(--op-color-neutral-plus-seven);
    color: var(--op-color-neutral-on-plus-seven);
  }

  &.btn--no-border {
    box-shadow: var(--op-border-all) transparent;

    &:not(:disabled, .btn--disabled):hover {
      background-color: transparent;
      color: var(--op-color-neutral-minus-three);
    }
  }
}

.btn-primary {
  @extend %btn-global;

  background-color: var(--op-color-primary-base);
  box-shadow: var(--op-border-all) var(--op-color-primary-base);
  color: var(--op-color-primary-on-base);

  &:not(:disabled, .btn--disabled):hover {
    background-color: var(--op-color-primary-plus-one);
    box-shadow: var(--op-border-all) var(--op-color-primary-plus-one);
    color: var(--op-color-primary-on-plus-one);
  }

  &.btn--no-border {
    background-color: transparent;
    box-shadow: none;
    color: var(--op-color-primary-base);

    &:not(:disabled, .btn--disabled):hover {
      background-color: transparent;
      box-shadow: none;
      color: var(--op-color-primary-plus-one);
    }
  }

  &.btn--outline {
    background-color: var(--op-color-primary-plus-seven);
    box-shadow: var(--op-border-all) var(--op-color-primary-on-plus-seven);
    color: var(--op-color-primary-on-plus-seven);

    &:not(:disabled, .btn--disabled):hover {
      background-color: var(--op-color-primary-plus-four);
      box-shadow: var(--op-border-all) var(--op-color-primary-on-plus-seven);
      color: var(--op-color-primary-on-plus-four);
    }
  }
}

.btn-secondary {
  @extend %btn-global;

  background-color: var(--op-color-primary-plus-seven);
  box-shadow: var(--op-border-all) var(--op-color-primary-on-plus-seven);
  color: var(--op-color-primary-on-plus-seven);

  &:not(:disabled, .btn--disabled):hover {
    background-color: var(--op-color-primary-plus-four);
    box-shadow: var(--op-border-all) var(--op-color-primary-on-plus-seven);
    color: var(--op-color-primary-on-plus-four);
  }

  &.btn--no-border {
    background-color: transparent;
    box-shadow: none;
    color: var(--op-color-primary-base);

    &:not(:disabled, .btn--disabled):hover {
      background-color: transparent;
      box-shadow: none;
      color: var(--op-color-primary-plus-one);
    }
  }
}

.btn-delete {
  @extend %btn-global;

  background-color: var(--op-color-alerts-danger-base);
  box-shadow: var(--op-border-all) var(--op-color-alerts-danger-base);
  color: var(--op-color-alerts-danger-on-base);

  &:not(:disabled, .btn--disabled):hover {
    background-color: var(--op-color-alerts-danger-plus-one);
    box-shadow: var(--op-border-all) var(--op-color-alerts-danger-plus-one);
    color: var(--op-color-alerts-danger-on-plus-one);
  }

  &.btn--no-border {
    background-color: transparent;
    box-shadow: none;
    color: var(--op-color-alerts-danger-base);

    &:not(:disabled, .btn--disabled):hover {
      background-color: transparent;
      box-shadow: none;
      color: var(--op-color-alerts-danger-plus-one);
    }
  }

  &.btn--outline {
    background-color: var(--op-color-alerts-danger-plus-seven);
    box-shadow: var(--op-border-all) var(--op-color-alerts-danger-on-plus-seven);
    color: var(--op-color-alerts-danger-on-plus-seven);

    &:not(:disabled, .btn--disabled):hover {
      background-color: var(--op-color-alerts-danger-plus-four);
      box-shadow: var(--op-border-all) var(--op-color-alerts-danger-on-plus-seven);
      color: var(--op-color-alerts-danger-on-plus-four);
    }
  }
}
