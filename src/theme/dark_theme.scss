@mixin dynamic_color_engine_dark {
  $color_varieties: 'primary', 'secondary', 'tertiary', 'neutral', 'neutral-variant';
  @each $color in $color_varieties {
    // Luminosity Scale (Weighted towards lower luminosity)
    --rm-color-#{$color}-luminosity-10:  hsl(var(--rm-color-#{$color}-h), var(--rm-color-#{$color}-s), 5%);
    --rm-color-#{$color}-luminosity-20:  hsl(var(--rm-color-#{$color}-h), var(--rm-color-#{$color}-s), 10%);
    --rm-color-#{$color}-luminosity-30:  hsl(var(--rm-color-#{$color}-h), var(--rm-color-#{$color}-s), 15%);
    --rm-color-#{$color}-luminosity-40:  hsl(var(--rm-color-#{$color}-h), var(--rm-color-#{$color}-s), 20%);
    --rm-color-#{$color}-luminosity-50:  hsl(var(--rm-color-#{$color}-h), var(--rm-color-#{$color}-s), 25%);
    --rm-color-#{$color}-luminosity-60:  hsl(var(--rm-color-#{$color}-h), var(--rm-color-#{$color}-s), 35%);
    --rm-color-#{$color}-luminosity-70:  hsl(var(--rm-color-#{$color}-h), var(--rm-color-#{$color}-s), 40%);
    --rm-color-#{$color}-luminosity-80:  hsl(var(--rm-color-#{$color}-h), var(--rm-color-#{$color}-s), 60%);
    --rm-color-#{$color}-luminosity-90:  hsl(var(--rm-color-#{$color}-h), var(--rm-color-#{$color}-s), 70%);
    --rm-color-#{$color}-luminosity-95:  hsl(var(--rm-color-#{$color}-h), var(--rm-color-#{$color}-s), 80%);
    --rm-color-#{$color}-luminosity-98:  hsl(var(--rm-color-#{$color}-h), var(--rm-color-#{$color}-s), 90%);

    // Semantic Scale: plus adds luminosity, minus removes luminosity
    // This borrows from the photography concept of Aperture f-stops.
    // https://www.adobe.com/creativecloud/photography/discover/f-stop.html
    --rm-color-#{$color}-plus-3:  var(--rm-color-#{$color}-luminosity-20);
    --rm-color-#{$color}-plus-2:  var(--rm-color-#{$color}-luminosity-30);
    --rm-color-#{$color}-plus-1:  var(--rm-color-#{$color}-luminosity-40);
    --rm-color-#{$color}-hover:   var(--rm-color-#{$color}-luminosity-40);
    --rm-color-#{$color}-base:    var(--rm-color-#{$color}-luminosity-50);
    --rm-color-#{$color}-minus-1: var(--rm-color-#{$color}-luminosity-60);
    --rm-color-#{$color}-minus-2: var(--rm-color-#{$color}-luminosity-70);
    --rm-color-#{$color}-minus-3: var(--rm-color-#{$color}-luminosity-80);

    --rm-color-#{$color}-on-plus-3:  var(--rm-color-white);
    --rm-color-#{$color}-on-plus-2:  var(--rm-color-white);
    --rm-color-#{$color}-on-plus-1:  var(--rm-color-#{$color}-luminosity-98);
    --rm-color-#{$color}-on-hover:   var(--rm-color-#{$color}-luminosity-98);
    --rm-color-#{$color}-on-base:    var(--rm-color-#{$color}-luminosity-95);
    --rm-color-#{$color}-on-minus-1: var(--rm-color-#{$color}-luminosity-98);
    --rm-color-#{$color}-on-minus-2: var(--rm-color-white);
    --rm-color-#{$color}-on-minus-3: var(--rm-color-#{$color}-luminosity-10);
  }

  // Miscellaneous
  --rm-color-background:    var(--rm-color-neutral-luminosity-10);
  --rm-color-on-background: var(--rm-color-neutral-luminosity-90);
  --rm-color-outline:       var(--rm-color-neutral-variant-luminosity-40);
}

:root {
  @media (prefers-color-scheme: dark) {
    & {
      @include dynamic_color_engine_dark;

      // Modal Overrides
      .modal__content {
        background: var(--rm-color-neutral-variant-plus-3);
        color: var(--rm-color-neutral-variant-on-plus-3);
      }

      .modal__close {
        &:hover {
          background: var(--rm-color-background);
        }
      }

      // Panel Overrides
      .panel {
        background: var(--rm-color-neutral-variant-plus-3);
        color: var(--rm-color-neutral-variant-on-plus-3);
      }

      .panel__close {
        &:hover {
          background: var(--rm-color-background);
        }
      }
    }
  }
}
