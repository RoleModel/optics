import { Meta, Story, Canvas, Controls } from '@storybook/blocks'
import * as AccordionStories from './Accordion.stories'
import { createSourceCodeLink } from '../../helpers/sourceCodeLink.js'

import { createAlert } from '../Alert/Alert.js'

<Meta of={AccordionStories} />

# Accordion

<div
  dangerouslySetInnerHTML={{
    __html: createSourceCodeLink({ link: 'components/accordion.scss' }).outerHTML,
  }}
></div>

Accordion classes are built on the `details` and `summary` html elements. They provide consistent and composable styling for disclosure widgets.

## Playground

<Canvas of={AccordionStories.Default} />
<Controls of={AccordionStories.Default} />

### Selective Imports

Accordion can be used as a standalone component, however, it does have a few dependencies. To see a full dependency list, see [Dependency Graph](?path=/docs/overview-selective-imports--docs#dependencies)

```css
// Depends on
@import '@rolemodel/optics/dist/scss/core/tokens';
@import '@rolemodel/optics/dist/scss/core/base';
@import '@rolemodel/optics/dist/scss/components/icon';

// Component
@import '@rolemodel/optics/dist/scss/components/accordion';
```

## Variations

### Default

`.accordion` used on a `details` element with a `summary` element as the first child will create an accordion component.
Within the `summary`, a span with the class `accordion__label` will be used as the title of the accordion and `accordion__marker` will be used as the icon.

Other content can be placed within the summary, but the `accordion__label` and `accordion__marker` classes must be used for the accordion to work properly.

<Canvas of={AccordionStories.Default} />

### Swapped Label and Marker

Positioning the marker after the label inside of the summary will result in the marker being on the right side of the accordion.

<Canvas of={AccordionStories.FlipHeaderAndMarker} />

### Additional Header Content

Additional content can be included within the `summary` element in any order. Anything not within the `.accordion__label` or `.accordion__marker` classes will be rendered wherever you place it in the `summary`. Note: Content placed between the label and the marker will fill the width between them. If placing a button there, you may want to wrap it in a div so the button doesn't stretch the whole space.

<Canvas of={AccordionStories.AdditionalHeaderContent} />

## Accordion API

Styles are built on CSS variables scoped to the accordion.

Here are the variables that can be customized:

{/* prettier-ignore-start */}
```css
--_op-accordion-summary-min-height
```
{/* prettier-ignore-end */}

## Customizing Accordion styles

<div
  dangerouslySetInnerHTML={{
    __html: createAlert({
      title: 'Important!',
      description: 'These patterns represent how to customize the style of the accordion for your project.',
    }).outerHTML,
  }}
></div>

The accordion classes are structured using the [BEM methodology](https://getbem.com/naming).

This allows us to define core styles on a main [block](https://getbem.com/naming/#block) class, and use [modifiers](https://getbem.com/naming/#modifier) to encapsulate variant styles. You can modify all accordion behavior by overriding the `.accordion` placeholder selector and setting any properties:

```css
.accordion {
}
```

## New Accordion Variations

<div
  dangerouslySetInnerHTML={{
    __html: createAlert({
      title: 'Important!',
      description: 'These patterns represent how to create new variations of the accordion for your project.',
    }).outerHTML,
  }}
></div>

Your application may need a variation. To add one, just follow this template. Note the double hyphen, indicating that this is a [modifier](https://getbem.com/naming/#modifier):

```css
.accordion--{name} {
  --_op-accordion-summary-min-height: var(--op-font-small);
}
```
