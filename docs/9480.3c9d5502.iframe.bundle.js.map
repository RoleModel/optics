{"version":3,"file":"9480.3c9d5502.iframe.bundle.js","mappings":";;;;;;;;;;;AAkBA","sources":["webpack://@rolemodel/optics/./node_modules/storybook-design-token/dist/index.mjs"],"sourcesContent":["import i, { useMemo, useState, useEffect, useCallback, useRef, useLayoutEffect } from 'react';\nimport { styled, keyframes } from '@storybook/theming';\nimport { useStorageState } from 'react-storage-hooks';\nimport { Icons, WithTooltip, TooltipNote, TooltipMessage, Button } from '@storybook/components';\nimport Xe from 'react-use-clipboard';\nimport { transparentize } from 'polished';\nimport { useVirtual } from 'react-virtual';\n\nfunction X(e,o){let[t,n]=useState(e);return useEffect(()=>{let s=setTimeout(()=>{n(e);},o);return ()=>{clearTimeout(s);}},[e,o]),t}function q(e){let[o,t]=useState(\"\"),n=X(o,250);return {categories:useMemo(()=>n?e?.map(l=>({...l,tokens:l.tokens.filter(u=>u.name.includes(n))})):e,[n,e]),searchText:o,setSearchText:t}}function U(e){let[o,t]=useState(),[n,s]=useState([]),[l,u]=useState([]),[f,m]=useState([]),[d,c]=useState([]),[S,k]=useState([]),[M,x]=useState(),[P,r]=useStorageState(localStorage,\"storybook-design-token-addon-card\",!1),[a,g]=useState(\"\"),w=useMemo(()=>{let y=[...n,...l,...f,...d,...S].filter(h=>h!==void 0&&h?.tokens.length>0);return Array.from(new Set(y.map(h=>h?.name))).map(h=>({label:h,categories:y.filter(H=>H?.name===h)}))},[n,l,f,d,S]);return useEffect(()=>{async function y(){let T=await(await fetch(\"./design-tokens.source.json\")).text();t(JSON.parse(T));}y();},[]),useEffect(()=>{let y=o?.cssTokens,T=o?.lessTokens,h=o?.scssTokens,H=o?.svgTokens,Y=o?.imageTokens;g(e?.styleInjection||\"\"),y&&(s(y.categories),!e?.defaultTab&&y.categories.length>0&&x(b=>b||y.categories[0].name),g(b=>b+y.injectionStyles)),T&&(u(T.categories),!e?.defaultTab&&T.categories.length>0&&x(b=>b||T.categories[0].name),g(b=>b+T.injectionStyles)),h&&(m(h.categories),!e?.defaultTab&&h.categories.length>0&&x(b=>b||h.categories[0].name),g(b=>b+h.injectionStyles)),H&&c(H.categories),Y&&k(Y.categories);},[e,o]),useEffect(()=>{e?.defaultTab&&x(e.defaultTab);},[e]),{activeCategory:M,cardView:P,setActiveCategory:x,setCardView:r,styleInjections:a,tabs:w}}var L=styled.input(({theme:e})=>({appearance:\"none\",background:e.input.background,border:\"0 none\",borderRadius:e.input.borderRadius,boxShadow:`${e.input.border} 0 0 0 1px inset`,boxSizing:\"inherit\",color:e.input.color||\"inherit\",display:\" block\",fontSize:e.typography.size.s2-1,lineHeight:\"20px\",margin:\" 0\",padding:\"6px 10px\",position:\"relative\",transition:\"all 200ms ease-out\",width:\"100%\",\"&:focus\":{boxShadow:`${e.color.secondary} 0 0 0 1px inset`,outline:\"none\"},\"&[disabled]\":{cursor:\"not-allowed\",opacity:.5},\"&:-webkit-autofill\":{WebkitBoxShadow:`0 0 0 3em ${e.color.lightest} inset`},\"::placeholder\":{color:e.color.mediumdark}}));var $e=styled.div(({theme:e})=>({display:\"flex\",flexDirection:\"column\",position:\"relative\",\"&:focus-within svg\":{color:e.color.defaultText}})),Ge=styled(Icons)(({theme:e})=>({width:12,height:12,position:\"absolute\",top:10,left:10,zIndex:1,pointerEvents:\"none\",color:e.textMutedColor})),We=styled.button(({theme:e})=>({width:16,height:16,padding:4,position:\"absolute\",top:8,right:8,zIndex:1,background:\"rgba(0,0,0,0.1)\",border:\"none\",borderRadius:16,color:e.color.defaultText,cursor:\"pointer\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\"})),_e=styled(Icons)(({theme:e})=>({})),je=styled(L)(({theme:e})=>({paddingLeft:28,paddingRight:28,height:32}));function K({value:e,onChange:o,style:t}){let n=useCallback(l=>{o(l.target.value);},[o]),s=useCallback(()=>{o(\"\");},[o]);return i.createElement($e,{className:\"token-search\",style:t},i.createElement(Ge,{icon:\"search\"}),i.createElement(je,{value:e,onChange:n,placeholder:\"Provide a token name \\u2026\"}),i.createElement(We,{onClick:s},i.createElement(_e,{icon:\"cross\"})))}var F=({button:e,value:o})=>{let[t,n]=Xe(o);return i.createElement(\"span\",{onClick:n},e)};var R=({token:e})=>{let o=useMemo(()=>styled.div(({theme:t})=>({background:t.color.secondary,borderRadius:2,height:32,width:\"100%\"})),[e]);return i.createElement(\"div\",{style:{overflow:\"hidden\"}},i.createElement(o,{style:{animation:e.value}}))};var ee=({token:e})=>{let o=useMemo(()=>styled.div(()=>({border:e.value,height:32,width:\"100%\"})),[e]);return i.createElement(o,null)};var ne=({token:e})=>{let o=useMemo(()=>styled.div(()=>({minHeight:32,height:32,overflow:\"auto\"})),[]),t=useMemo(()=>styled.div(({theme:n})=>({background:n.color.secondary,borderRadius:e.value,minHeight:`calc(${e.value} * 2)`,minWidth:`calc(${e.value} * 2)`,overflow:\"hidden\",width:\"100%\"})),[e]);return i.createElement(o,null,i.createElement(t,null))};var ie=({token:e})=>{let o=useMemo(()=>styled.div(()=>({background:e.value,borderRadius:2,height:32,width:\"100%\"})),[e]);return i.createElement(o,null)};var se=({token:e})=>{let o=keyframes`\n    0% {\n      transform: scaleX(0);\n    }\n    50% {\n      transform: scaleX(1);\n    }\n    100% {\n      transform: scaleX(0);\n    }\n  `,t=useMemo(()=>styled.div(({theme:n})=>({animation:`${o} 2s infinite`,animationTimingFunction:e.value,background:n.color.secondary,borderRadius:2,height:32,transformOrigin:\"left\",width:\"100%\"})),[e]);return i.createElement(t,null)};var ae=()=>{let e=useMemo(()=>styled.div(({theme:o})=>({alignItems:\"center\",color:o.color.mediumdark,display:\"flex\",height:32,width:\"100%\"})),[]);return i.createElement(e,null,\"No preview available.\")};var pe=({token:e})=>{let o=useMemo(()=>styled.div(()=>({fontFamily:e.value,width:\"100%\"})),[e]);return i.createElement(o,null,\"Lorem ipsum\")};var le=({token:e})=>{let o=useMemo(()=>styled.div(()=>({fontSize:e.value,height:e.value,lineHeight:1,whiteSpace:\"nowrap\",width:\"100%\"})),[e]);return i.createElement(o,null,\"Lorem ipsum\")};var me=({token:e})=>{let o=useMemo(()=>styled.div(()=>({fontWeight:e.value,width:\"100%\"})),[e]);return i.createElement(o,null,\"Lorem ipsum\")};var de=({token:e})=>{let o=useMemo(()=>styled.div(()=>({height:\"100%\",lineHeight:e.value,overflow:\"auto\",width:\"100%\"})),[e]);return i.createElement(o,null,\"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Ipsam veniam eum dicta.\")};var ce=({token:e})=>{let o=useMemo(()=>styled.div(()=>({height:\"100%\",letterSpacing:e.value,overflow:\"auto\",width:\"100%\"})),[e]);return i.createElement(o,null,\"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Ipsam veniam eum dicta.\")};var ge=({token:e})=>{let o=useMemo(()=>styled.div(()=>({display:\"flex\",height:\"2rem\",width:\"100%\"})),[e]),t=useMemo(()=>styled.div(()=>({backgroundColor:\"#000\",borderRadius:\"50%\",height:\"2rem\",opacity:e.value,width:\"2rem\",\"&:nth-of-type(2)\":{transform:\"translateX(-50%)\"}})),[e]);return i.createElement(o,null,i.createElement(t,null),i.createElement(t,null))};var he=({token:e})=>{let o=useMemo(()=>styled.div(({theme:t})=>({background:\"#fff\",boxShadow:e.value,height:32,width:\"100%\"})),[e]);return i.createElement(o,null)};var ye=({token:e})=>{let o=useMemo(()=>styled.div(({theme:t})=>({background:t.color.secondary,borderRadius:2,height:32,width:e.value})),[e]);return i.createElement(o,null)};var xe=({token:e})=>{let o=useMemo(()=>styled.div(()=>({alignItems:\"center\",display:\"flex\",height:32,width:\"100%\"})),[e]);return i.createElement(o,{dangerouslySetInnerHTML:{__html:e.value}})};function be({token:e}){let o=useMemo(()=>styled.img(()=>({maxHeight:32,maxWidth:\"100%\",backgroundSize:\"contain\"})),[e]);return i.createElement(o,{src:`data:image/png;base64, ${e.value}`})}var O=({token:e,presenters:o})=>{let t=e.presenter,n={...Ao,...o||{}},s=t!=null?n[t]:ae;return i.createElement(s,{token:e})},Ao={[`${\"Animation\"}`]:R,[`${\"Border\"}`]:ee,[`${\"BorderRadius\"}`]:ne,[`${\"Color\"}`]:ie,[`${\"Easing\"}`]:se,[`${\"FontFamily\"}`]:pe,[`${\"FontSize\"}`]:le,[`${\"FontWeight\"}`]:me,[`${\"LineHeight\"}`]:de,[`${\"LetterSpacing\"}`]:ce,[`${\"Opacity\"}`]:ge,[`${\"Shadow\"}`]:he,[`${\"Spacing\"}`]:ye,[`${\"Svg\"}`]:xe,[`${\"Image\"}`]:be};var v=({children:e,onClick:o})=>{let t=useMemo(()=>styled.button(({theme:n})=>({alignItems:\"center\",backgroundColor:\"transparent\",border:\"none\",cursor:\"pointer\",display:\"inline-flex\",height:18,justifyContent:\"center\",marginLeft:4,padding:0,verticalAlign:\"middle\",width:18,\"&:hover\":{color:n.color.secondary},\"> svg\":{height:13,position:\"relative\",top:-1,width:13}})),[]);return i.createElement(t,{onClick:o},e)};var A=({onValueChange:e,readonly:o,token:t})=>{let[n,s]=useState(t.rawValue),l=useMemo(()=>styled.div(()=>({position:\"relative\"})),[]),u=useMemo(()=>styled.span(()=>({position:\"absolute\",right:8,top:\"50%\",transform:\"translate3d(0, -50%, 0)\"})),[]),f=useMemo(()=>styled.span(()=>({overflow:\"hidden\",wordBreak:\"break-all\",WebkitLineClamp:3,WebkitBoxOrient:\"vertical\",display:\"-webkit-box\"})),[]),m=t.sourceType!==\"CSS\"&&t.sourceType!==\"SVG\";return useEffect(()=>{let c=document.querySelector(\"#storybook-preview-iframe\")?.contentWindow?.document.documentElement;c!=null&&(t.rawValue!==n?c.style.setProperty(t.name,n):c.style.setProperty(t.name,t.rawValue));},[n]),i.createElement(l,null,m&&i.createElement(f,{title:n},n),!m&&i.createElement(L,{readOnly:o,onChange:d=>{let c=d.target.value;s(c),e(c);},value:n}),!m&&t.rawValue!==n&&i.createElement(u,null,i.createElement(v,{onClick:()=>{s(t.rawValue),e(t.rawValue);}},i.createElement(Icons,{icon:\"close\"}))))};var Se=({categories:e,padded:o=!0,readonly:t,showValueColumn:n=!0,pageSize:s=50,presenters:l})=>{let[u,f]=useState({}),[m,d]=useState(0),c=useMemo(()=>styled.div(()=>({display:\"grid\",columnGap:12,gridTemplateColumns:\"repeat(auto-fit, minmax(240px, 1fr))\",padding:o?15:void 0,rowGap:12})),[]),S=useMemo(()=>styled.div(({theme:r})=>({boxShadow:\"rgb(0 0 0 / 10%) 0px 1px 3px 1px, rgb(0 0 0 / 7%) 0px 0px 0px 1px\",borderRadius:4,color:r.color.defaultText,fontFamily:r.typography.fonts.base,fontSize:r.typography.size.s1,padding:12,overflow:\"hidden\",\":hover\":{backgroundColor:r.background.hoverable},\"> *:not(:last-child)\":{marginBottom:8},svg:{maxWidth:\"100%\",maxHeight:\"100%\"}})),[]),k=styled.span(({theme:r})=>({fontFamily:r.typography.fonts.mono,fontWeight:r.typography.weight.bold,fontSize:r.typography.size.s1})),M=useMemo(()=>styled.div(({theme:r})=>({alignItems:\"center\",color:r.color.defaultText,display:\"flex\",fontFamily:r.typography.fonts.base,fontSize:r.typography.size.s1,justifyContent:\"space-between\",paddingRight:o?15:void 0,paddingBottom:o?48:void 0,paddingLeft:o?15:void 0,marginTop:8,\"& > div\":{display:\"flex\",gap:8}})),[]),x=useMemo(()=>e.reduce((r,a)=>[...r,...a.tokens],[]),[e]),P=useMemo(()=>Math.ceil(x.length/s),[x]);return i.createElement(i.Fragment,null,i.createElement(c,null,x.slice(m*s,m*s+s).map((r,a)=>i.createElement(S,{key:r.name+\"-card-\"+a},i.createElement(k,null,r.name),i.createElement(WithTooltip,{hasChrome:!1,tooltip:i.createElement(TooltipNote,{note:\"Copy to clipboard\"})},i.createElement(F,{button:i.createElement(v,null,i.createElement(Icons,{icon:\"copy\"})),value:r.name})),r.description&&i.createElement(WithTooltip,{tooltip:i.createElement(TooltipMessage,{desc:r.description})},i.createElement(v,null,i.createElement(Icons,{icon:\"info\"}))),n&&i.createElement(A,{onValueChange:g=>{f(w=>({...w,[r.name]:g===r.rawValue?void 0:g}));},readonly:t,token:r}),i.createElement(O,{presenters:l,token:{...r,value:u[r.name]||r.value}})))),P>1&&i.createElement(M,null,i.createElement(\"span\",null,\"Page \",m+1,\" of \",P),i.createElement(\"div\",null,i.createElement(Button,{disabled:m===0,onClick:()=>d(r=>Math.max(0,r-1)),tertiary:!0,small:!0},\"Previous page\"),i.createElement(Button,{disabled:m>=P-1,onClick:()=>d(r=>Math.min(r+1,P-1)),tertiary:!0,small:!0},\"Next page\"))))};var Ee=({categories:e,maxHeight:o,readonly:t,showValueColumn:n=!0,presenters:s})=>{let[l,u]=useState({}),[f,m]=useState(o||100),d=useRef(null),c=useRef(null),S=useMemo(()=>e.reduce((r,a)=>[...r,...a.tokens],[]),[e]),k=useVirtual({size:S.length,parentRef:d,estimateSize:useCallback(()=>49,[])}),M=useMemo(()=>styled.div(()=>({maxHeight:f?`${f+30}px`:\"none\",overflow:\"auto\",padding:\"15px\"})),[f]),x=useMemo(()=>styled.table(({theme:r})=>({borderCollapse:\"collapse\",borderSpacing:0,color:r.color.defaultText,fontFamily:r.typography.fonts.base,fontSize:r.typography.size.s1,minWidth:700,tableLayout:\"fixed\",textAlign:\"left\",width:\"100%\",\"thead > tr\":{display:\"flex\"},\"tbody > tr\":{borderTop:`1px solid ${r.color.mediumlight}`,display:\"flex\",\":first-of-type\":{borderTopColor:r.color.medium},\":last-of-type\":{borderBottom:`1px solid ${r.color.mediumlight}`},\":hover\":{backgroundColor:r.background.hoverable}},tr:{\":hover\":{backgroundColor:\"rgba(0,0,0, 0.1)\"}},\"td, th\":{border:\"none !important\",textOverflow:\"ellipsis\",verticalAlign:\"middle\",\":nth-of-type(1)\":{flexBasis:\"50%\",flexGrow:1,flexShrink:0},\":nth-of-type(2)\":{flexBasis:\"25%\",flexGrow:0,flexShrink:0},\":nth-of-type(3)\":{flexBasis:\"25%\",flexGrow:0,flexShrink:0}},th:{color:r.base===\"light\"?transparentize(.25,r.color.defaultText):transparentize(.45,r.color.defaultText),paddingBottom:12,\":not(:first-of-type)\":{paddingLeft:15},\":not(:last-of-type)\":{paddingRight:15},\":last-of-type\":{width:200}},td:{overflow:\"hidden\",paddingBottom:8,paddingTop:8,alignItems:\"center\",\":not(:first-of-type)\":{paddingLeft:15},\":not(:last-of-type)\":{paddingRight:15},svg:{maxWidth:\"100%\",maxHeight:\"100%\"},span:{alignItems:\"center\",display:\"flex\",height:\"100%\"}}})),[]),P=styled.span(({theme:r})=>({fontFamily:r.typography.fonts.mono,fontWeight:r.typography.weight.bold,fontSize:r.typography.size.s1}));return useLayoutEffect(()=>{let r=document.querySelector(\"#storybook-panel-root\");if(!r)return;let a=()=>{if(o!==void 0||!r)return;let w=window.innerHeight,y=d.current?.getBoundingClientRect().top||0,T=w-y-40;m(T);};setTimeout(()=>{a();});let g=new ResizeObserver(a);return g.observe(r),()=>g.disconnect()},[]),i.createElement(M,{ref:d},i.createElement(x,{style:{height:`${k.totalSize+(c.current?.getBoundingClientRect().height||0)}px`,position:\"relative\"}},i.createElement(\"thead\",{className:\"docblock-argstable-head\",ref:c,style:{height:\"28px\"}},i.createElement(\"tr\",null,i.createElement(\"th\",null,\"Name\"),n&&i.createElement(\"th\",null,\"Value\"),i.createElement(\"th\",null,\"Preview\"))),i.createElement(\"tbody\",null,k.virtualItems.map(r=>{let a=S[r.index];return i.createElement(\"tr\",{key:r.index,style:{position:\"absolute\",top:0,left:0,width:\"100%\",height:`${r.size}px`,transform:`translateY(${r.start+(c.current?.getBoundingClientRect().height||0)}px)`}},i.createElement(\"td\",null,i.createElement(\"span\",null,i.createElement(P,null,a.name),i.createElement(WithTooltip,{hasChrome:!1,tooltip:i.createElement(TooltipNote,{note:\"Copy to clipboard\"})},i.createElement(F,{button:i.createElement(v,null,i.createElement(Icons,{icon:\"copy\"})),value:a.name})),a.description&&i.createElement(WithTooltip,{tooltip:i.createElement(TooltipMessage,{desc:a.description})},i.createElement(v,null,i.createElement(Icons,{icon:\"info\"}))))),n&&i.createElement(\"td\",null,i.createElement(A,{key:a.name,onValueChange:g=>{u(w=>({...w,[a.name]:g===a.rawValue?void 0:g}));},readonly:t,token:a})),i.createElement(\"td\",null,i.createElement(O,{presenters:s,token:{...a,value:l[a.name]||a.value}})))}))))};var Qo=styled.div(()=>({margin:\"25px 0 40px\",\"*\":{boxSizing:\"border-box\"}})),Ro=styled.div(()=>({boxShadow:\"rgb(0 0 0 / 10%) 0px 1px 3px 1px, rgb(0 0 0 / 7%) 0px 0px 0px 1px\",borderRadius:4})),Ne=({categoryName:e,maxHeight:o=600,showValueColumn:t=!0,viewType:n=\"table\",showSearch:s=!0,pageSize:l,presenters:u})=>{let{tabs:f}=U({pageSize:l,showSearch:s,presenters:u}),m=useMemo(()=>f.find(d=>d.label===e),[e,f]);return m?i.createElement(er,{categories:m.categories,viewType:n,maxHeight:o,showValueColumn:t,showSearch:s,pageSize:l,presenters:u}):null};function er({viewType:e,categories:o,maxHeight:t,showValueColumn:n,showSearch:s,pageSize:l,presenters:u}){let{searchText:f,setSearchText:m,categories:d}=q(o??[]);return i.createElement(Qo,{className:\"design-token-container\"},s&&i.createElement(K,{value:f,onChange:c=>{m(c);},style:{margin:\"12px 0\"}}),e===\"table\"&&i.createElement(Ro,{className:\"design-token-card\"},i.createElement(Ee,{categories:d,maxHeight:t,readonly:!0,showValueColumn:n,presenters:u})),e===\"card\"&&i.createElement(Se,{categories:d,padded:!1,readonly:!0,showValueColumn:n,pageSize:l,presenters:u}))}var Zn={};\n\nexport { Ne as DesignTokenDocBlock, Zn as default };\n//# sourceMappingURL=out.js.map\n//# sourceMappingURL=index.mjs.map"],"names":[],"sourceRoot":""}